<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Editar Perfil | Onroute</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="editor_usuario.css">

</head>
<body>

<div class="mobile-app">
  <div class="app-header">
    <!-- Botón de regresar agregado aquí -->
    <button class="back-button" onclick="regresar()">
      <i class="fas fa-arrow-left"></i>
    </button>
    <div class="app-title">Editar Perfil</div>
    <div class="app-subtitle">Actualiza tu información personal</div>
  </div>

  <div id="userForm" style="display:none;">
    <div class="edit-form">
            <div class="profile-picture">
        <div class="profile-img-container">
          <img id="profileImage" src="https://via.placeholder.com/120" alt="Foto de perfil" class="profile-img" onclick="document.getElementById('fileInput').click()">
        </div>
        <input type="file" id="fileInput" class="file-input" accept="image/*" onchange="cambiarFotoPerfil(event)">
        <br>
        <button class="change-photo-btn" onclick="document.getElementById('fileInput').click()">
          <i class="fas fa-camera"></i> Cambiar foto
        </button>
      </div>

            <div class="user-role">
        <span id="roleBadge" class="role-badge"></span>
      </div>

      <div class="section-title">
        <i class="fas fa-user-circle"></i> Información Personal
      </div>

      <div class="input-group">
        <label><i class="fas fa-envelope"></i> Correo Electrónico</label>
        <input type="email" id="currentEmail" readonly>
      </div>

      <div class="input-group">
        <label for="fullName"><i class="fas fa-user"></i> Nombre Completo</label>
        <input type="text" id="fullName" placeholder="Ingresa tu nombre completo">
      </div>

      <div class="input-group">
        <label for="phoneNumber"><i class="fas fa-phone"></i> Número de Celular</label>
        <input type="tel" id="phoneNumber" placeholder="Ingresa tu número de celular">
      </div>

      <div class="divider"></div>

      <div class="section-title">
        <i class="fas fa-lock"></i> Seguridad
      </div>

            <div class="action-buttons">
        <button class="btn btn-outline" onclick="mostrarCambioContrasena()">
          <i class="fas fa-key"></i> Cambiar Contraseña
        </button>
      </div>

            <div id="passwordFields" class="password-fields">
        <div class="input-group">
          <label><i class="fas fa-lock"></i> Contraseña Actual</label>
          <div class="input-with-icon">
            <input type="password" id="currentPassword" placeholder="Ingresa tu contraseña actual">
            <i class="fas fa-eye" onclick="togglePasswordVisibility('currentPassword', this)"></i>
          </div>
        </div>

        <div class="input-group">
          <label><i class="fas fa-key"></i> Nueva Contraseña</label>
          <div class="input-with-icon">
            <input type="password" id="newPassword" placeholder="Ingresa tu nueva contraseña">
            <i class="fas fa-eye" onclick="togglePasswordVisibility('newPassword', this)"></i>
          </div>
        </div>

        <div class="input-group">
          <label><i class="fas fa-check-circle"></i> Confirmar Contraseña</label>
          <div class="input-with-icon">
            <input type="password" id="confirmPassword" placeholder="Confirma tu nueva contraseña">
            <i class="fas fa-eye" onclick="togglePasswordVisibility('confirmPassword', this)"></i>
          </div>
        </div>

        <div class="action-buttons">
          <button class="btn btn-secondary" onclick="cancelarCambioContrasena()">
            <i class="fas fa-times"></i> Cancelar
          </button>
          <button class="btn btn-primary" onclick="cambiarContraseña()">
            <i class="fas fa-check"></i> Actualizar
          </button>
        </div>
      </div>

      <div class="divider"></div>

            <div class="action-buttons">
        <button class="btn btn-primary" onclick="guardarCambios()">
          <i class="fas fa-save"></i> Guardar Cambios
        </button>
      </div>

      <div class="action-buttons">
        <button class="btn btn-secondary" onclick="cerrarSesion()">
          <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
        </button>
      </div>

      <div id="status" class="status-container"></div>
    </div>
  </div>

  <div id="loginMessage" class="login-message" style="display:none;">
    <h3>No estás autenticado</h3>
    <p>Para editar tu información de usuario, primero debes iniciar sesión.</p>
    <button class="login-btn" onclick="window.location.href='../login/login.html'">
      <i class="fas fa-sign-in-alt"></i> Ir a Inicio de Sesión
    </button>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<script type="module" src="editor_usuario_principal.js"></script>
</body>
</html>